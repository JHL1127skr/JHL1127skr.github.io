---
outline: deep
---

# Fiber 架构：未完成

---

### FIiber 的出现

随着业务复杂繁重，React 15 中的栈调和（Stack Reconciler ）是一个同步递归的过程，漫长不可打断的同步渲染进程会带来一定风险。

### 什么是 Fiber

> Fiber 就是比线程还要纤细的一个过程，也就是所谓的“纤程”，纤程的出现意在渲染过程实现更加精细的控制

一、从架构角度来看：Fiber 是对 React 核心算法的重写\
二、从编码角度来看：Fiber 是 React 内部定义的一种数据结构\
三、从工作流的角度来看：Fiber 节点保存了组件需要更新的状态和副作用

> Fiber 架构的应用目的是实现 **“增量渲染”**

所谓“增量渲染”就是把一个渲染任务分解成多个渲染任务，将其分散到多个帧里面，
“增量渲染” 目的是实现任务的**可中断**、_可恢复_、不同的任务不同的**优先级**，达成更加顺滑的用户体验

![图片](/blog/Fiber01.png)

对比 React15 Fiber 架构增加了调度器 **Scheduler**

### Fiber 架构核心：“可中断”、“可恢复”、“优先级”

优先级：每个更新任务都会被赋予一个优先级

可中断：若发现 B 的优先级高于当前任务 A，那么当前处于 Reconciler 层的 A 任务就会被中断

可恢复：A 任务将会被重新推入 Reconciler 层，继续他的渲染之旅，这便是所谓的“可恢复”
