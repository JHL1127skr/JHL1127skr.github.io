---
outline: deep
---

### 1ã€ã€ŒåŒºé—´åŠ æ³•ã€ğŸŸ 

é¢˜ç›®ï¼šå‡è®¾ä½ æœ‰ä¸€ä¸ªé•¿åº¦ä¸º`n`çš„æ•°ç»„ï¼Œåˆå§‹æƒ…å†µä¸‹æ‰€æœ‰çš„æ•°å­—å‡ä¸º`0`ï¼Œä½ å°†ä¼šè¢«ç»™å‡º`k`ä¸ªè·Ÿæ–°æ“ä½œã€‚æ¯ä¸ªæ“ä½œè¢«è¡¨ç¤ºä¸€ä¸ªä¸ªä¸‰å…ƒç»„`[startIndex,endIndex,inc]`ã€‚ä½ éœ€è¦å°†æ•°ç»„ä¸­`[startIndex...endIndex]`åŒºé—´å†…çš„å€¼åŠ `inc`ã€‚è¿”å›`k`æ¬¡æ“ä½œåçš„æ•°ç»„ã€‚

ç¤ºä¾‹ï¼š

```
è¾“å…¥ï¼šlength = 5ï¼Œupdates = [[1,3,2],[2,4,3],[0,2,-2]]
è¾“å‡ºï¼š[-2,0,3,5,3]
```

æ€è·¯ï¼šé€šè¿‡ å½“å‰é¡¹ å‡å» å‰ä¸€é¡¹ çš„å€¼æ±‚å‡ºä¸€ä¸ª`diff`æ•°ç»„ã€‚æ­¤æ—¶ï¼Œå¯¹`diff`æ•°ç»„ä¸­çš„ `startIndex`å’Œ` endIndex + 1`æ“ä½œï¼ˆ`startIndex`ï¼ˆ`+=val`ï¼‰ä¸`endIndex`ï¼ˆ-=valï¼‰ä½œä¸ºåŒºé—´è¾¹ç•Œï¼‰å°±ç›¸å½“äºå¯¹åŸæ•°ç»„çš„`[startIndex...endIndex]`çš„æ¯ä¸€é¡¹æ“ä½œã€‚æœ€åå†é€šè¿‡`diff`æ•°ç»„çš„ å‰ä¸€é¡¹ åŠ ä¸Š åŸæ•°ç»„çš„ å½“å‰é¡¹ æ±‚å‡ºæ–°æ•°ã€‚

```
æ„é€ ï¼šdiffæ•°ç»„:åŸæ•°ç»„ å½“å‰é¡¹ - å‰ä¸€é¡¹
[8,2,6,3,1] => [8,-6,4,-3,-2]
æ“ä½œï¼šå¯¹startIndex += val å’Œ endIndex + 1 -= val æ“ä½œ
[1,3,3]: [8,-6,4,-3,-2] => [8,-3,4,-3,-5]
è¿˜åŸï¼šæ–°æ•°ç»„ï¼šdiffæ•°ç»„å½“å‰é¡¹ + æ–°æ•°ç»„çš„å‰ä¸€é¡¹
[8,-3,4,-3,-5]
[8]->[8,5]->[8,5,9]->[8,5,9,6]->[8,5,9,6,1]
```

ä»£ç ï¼š

```js
const fn = (length, updates) => {
    const arr = new Array(length).fill(0); //æ ¹æ®é¢˜ç›®æ„å»º åŸæ•°ç»„
    const diff = [];
    diff[0] = arr[0];
    //æ„å»ºdiffæ•°ç»„
    for (let i = 1; i < arr.length; i++) {
        diff[i] = arr[i] - arr[i - 1];
    }
    //å¯¹diffæ•°ç»„æ“ä½œ
    for (let i = 0; i < updates.length; i++) {
        const item = updates[i];
        const left = item[0];
        const right = item[1];
        const val = item[2];
        diff[left] += val;
        diff[right + 1] -= val;
    }
    //è¿˜åŸdiffæ•°ç»„
    const result = [];
    result[0] = diff[0];
    for (let i = 0; i < diff.length; i++) {
        result[i] = result[i - 1] + diff[i];
    }
    return result;
};
```
